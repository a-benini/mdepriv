<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Synthetic Indicators of Multiple Deprivation — mdepriv • mdepriv</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Synthetic Indicators of Multiple Deprivation — mdepriv"><meta property="og:description" content="calculates synthetic scores of multiple deprivation from unidimensional indicators and/or basic items of deprivation.
The indicators / items all have to be negatively oriented, meaning: higher values are less desirable.
The scores are weighted sums of the individual indicators / items taking values on the [0,1] range.
Several alternative weighting methods are available, notably Betti &amp;amp; Verma's (1998) double-weighting method."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mdepriv</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fas fa-book"></span>
     
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/mdepriv_get_started.html">Get Started with mdepriv</a>
    </li>
    <li>
      <a href="../articles/what_is_different_from_stata.html">What is different from Stata’s mdepriv?</a>
    </li>
  </ul></li>
<li>
  <a href="../reference/index.html">
    <span class="far fa-file-code"></span>
     
    Functions &amp; Datasets
  </a>
</li>
<li>
  <a href="../news/index.html">
    <span class="far fa-newspaper"></span>
     
    News
  </a>
</li>
<li>
  <a href="https://github.com/a-benini/mdepriv/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Synthetic Indicators of Multiple Deprivation</h1>
    <small class="dont-index">Source: <a href="https://github.com/a-benini/mdepriv/blob/HEAD/R/mdepriv.R" class="external-link"><code>R/mdepriv.R</code></a></small>
    <div class="hidden name"><code>mdepriv.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>calculates synthetic scores of multiple deprivation from unidimensional indicators and/or basic items of deprivation.
The indicators / items all have to be negatively oriented, meaning: higher values are less desirable.
The scores are weighted sums of the individual indicators / items taking values on the [0,1] range.
Several alternative weighting methods are available, notably Betti &amp; Verma's (1998) double-weighting method.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">mdepriv</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">items</span>,</span>
<span>  sampling_weights <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cz"</span>, <span class="st">"ds"</span>, <span class="st">"bv"</span>, <span class="st">"equal"</span><span class="op">)</span>,</span>
<span>  bv_corr_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mixed"</span>, <span class="st">"pearson"</span><span class="op">)</span>,</span>
<span>  rhoH <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  wa <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  wb <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  user_def_weights <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  score_i_heading <span class="op">=</span> <span class="st">"score_i"</span>,</span>
<span>  output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"view"</span>, <span class="st">"all"</span>, <span class="st">"weighting_scheme"</span>, <span class="st">"aggregate_deprivation_level"</span>,</span>
<span>    <span class="st">"summary_by_dimension"</span>, <span class="st">"summary_by_item"</span>, <span class="st">"summary_scores"</span>, <span class="st">"score_i"</span>,</span>
<span>    <span class="st">"sum_sampling_weights"</span>, <span class="st">"data"</span>, <span class="st">"items"</span>, <span class="st">"sampling_weights"</span>, <span class="st">"wa"</span>, <span class="st">"wb"</span>, <span class="st">"rhoH"</span>,</span>
<span>    <span class="st">"user_def_weights"</span>, <span class="st">"score_i_heading"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>data</dt>
<dd><p>a <code>data.frame</code> or a <code>matrix</code> with columns containing variables representing deprivation items measured on the [0,1] range.
Optionally a column with user defined sampling weights (s. argument <code>sampling_weights</code>) can be included.</p></dd>


<dt>items</dt>
<dd><p>a character string vector or <code>list</code> of such vectors specifying the indicators / items within the argument <code>data</code>, from which the deprivation scores are derived.
By using a <code>list</code> with more than one vector, the items are grouped in dimensions.
By naming the <code>list</code> elements, the user defines the dimensions' names.
Else, dimensions are named by default <code>"Dimension 1"</code> to <code>"Dimension K"</code> where K is the number of dimensions.</p></dd>


<dt>sampling_weights</dt>
<dd><p>a character string corresponding to the column heading of a numeric variable within the argument <code>data</code> which is specified as sampling weights.
By default set to <code>NA</code>, which means no specification of sampling weights.</p></dd>


<dt>method</dt>
<dd><p>a character string selecting the weighting scheme.
Available choices are <code>"cz"</code> (default), <code>"ds"</code>, <code>"bv"</code> and <code>"equal"</code> (s. Details).</p></dd>


<dt>bv_corr_type</dt>
<dd><p>a character string selecting the correlation type if <code>method = "bv"</code>.
Available choices are <code>"mixed"</code> (default) and <code>"pearson"</code>.
The option <code>"mixed"</code> automatically detects the appropriate correlation type
<code>"pearson"</code>, <code>"polyserial"</code> or <code>"polychoric"</code> for each pair of items (s. Details).</p></dd>


<dt>rhoH</dt>
<dd><p>numeric. Permits setting <code>rhoH</code> if the argument <code>method</code> is set to <code>"bv"</code>,
or the argument <code>wb</code> is set to either <code>"mixed"</code> or <code>"pearson"</code>.
<code>rhoH</code> distributes high and low coefficients of the triangular item correlation table to two factors.
By default <code>rhoH</code> is set to <code>NA</code>, which causes its automatic calculation according to Betti &amp; Verma's (1998)
suggestion to divide the ordered set of correlation coefficients at the point of their largest gap.
Alternatively, the user can set a value for <code>rhoH</code> in the interval [-1, +1].
When <code>rhoH</code> is automatically calculated, the weights of items that overall are more weakly correlated with the other items turn out higher,
compared to their weights when the user chooses a <code>rhoH</code> value far from the automatic version.
If the user chooses more than one dimension, <code>rhoH</code> is common for all.</p></dd>


<dt>wa, wb</dt>
<dd><p>two single character strings providing alternative, more flexible ways to select the weighting schemes.
Weights are computed as the product of two terms as in the Betti-Verma scheme. <code>wa</code> selects the form of the first factor
and is one of <code>"cz"</code>, <code>"ds"</code>, <code>"bv"</code> or <code>"equal"</code> (s. Details).
<code>wb</code> selects the form of the second factor and is one of <code>"mixed"</code>, <code>"pearson"</code> or <code>"diagonal"</code>,
where the latter sets all off-diagonal correlations to zero (s. Details).
<code>wa</code> and <code>wb</code> are set both by default to <code>NA</code>, which means no specification.
Specify either <code>wa</code> and <code>wb</code>, or <code>method</code>, not both.</p></dd>


<dt>user_def_weights</dt>
<dd><p>a numeric vector or <code>list</code> of such vectors to pass user-defined weights.
To pass these weights correctly to the corresponding items,
the structure of the vector, respectively of the <code>list</code>, must match the argument <code>items</code>.
By creating a <code>list</code> with more than one vector, the user groups the items in dimensions.
The elements of the vector, respectively of each vector within the <code>list</code>,
must sum to 1. User-defined names of dimensions are inherited from the argument <code>items</code>.
<code>user_def_weights</code> is set by default to <code>NA</code>, which means unspecified.</p></dd>


<dt>score_i_heading</dt>
<dd><p>a character string (default: <code>"score_i"</code>)
giving a heading to the <code>score_i</code> column in the output <code>"data"</code>.</p></dd>


<dt>output</dt>
<dd><p>a character string vector selecting the output.
Available multiple choices are <code>"view"</code> (default), <code>"all"</code>, <code>"weighting_scheme"</code>,
<code>"aggregate_deprivation_level"</code>, <code>"summary_by_dimension"</code>, <code>"summary_by_item"</code>,
<code>"summary_scores"</code>, <code>"score_i"</code>, <code>"sum_sampling_weights"</code>,
<code>"data"</code>, <code>"items"</code>, <code>"sampling_weights"</code>, <code>"wa"</code>,
<code>"wb"</code>, <code>"rhoH"</code>, <code>"user_def_weights"</code> and  <code>"score_i_heading"</code> (s. Value).</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>a <code>list</code> or a single object according to the argument <code>output</code>. Possible <code>output</code> elements:</p><ul><li><p><code>"view"</code> (default) composes a <code>list</code> including <code>"weighting_scheme"</code>, <code>"aggregate_deprivation_level"</code>, <code>"summary_by_dimension"</code>, <code>"summary_by_item"</code> and <code>"summary_scores"</code>.</p></li>
<li><p><code>"all"</code> delivers a <code>list</code> with all possible <code>output</code> elements.</p></li>
<li><p><code>"weighting_scheme"</code> a character string returning the weighting scheme chosen by
  the argument <code>method</code>, the arguments <code>wa</code> and <code>wb</code>, or the argument <code>user_def_weights</code>, respectively.</p></li>
<li><p><code>"aggregate_deprivation_level"</code> a single numeric value in the [0,1] range displaying the aggregate deprivation level.</p></li>
<li><p><code>"summary_by_dimension"</code> a <code>data.frame</code> containing the variables:
  <code>Dimension</code> (dimension names),
  <code>N_Item</code> (number of items per dimension),
  <code>Index</code> (within-dimension index),
  <code>Weight</code> (dimension weights),
  <code>Contri</code> (dimension contribution),
  <code>Share</code> (dimension relative contribution).
  If the user did not specify two or more dimensions (groups of items) <code>"summary_by_dimension"</code> is dropped from the output, unless it is explicitly requested as an element of the argument <code>output</code>.</p></li>
<li><p><code>"summary_by_item"</code> a <code>data.frame</code> containing variables:
  <code>Dimension</code> (dimension names),
  <code>Item</code> (item names),
  <code>Index</code> (item means),
  <code>Weight</code> (item weights),
  <code>Contri</code> (item contributions),
  <code>Share</code> (relative item contributions).
  The column <code>Dimension</code> is dropped unless at least two dimensions (groups of items) are specified or if <code>"summary_by_dimension"</code> is explicitly requested as an element of the argument <code>output</code>.</p></li>
<li><p><code>"summary_scores"</code> a <code>data.frame</code> containing these statistics of <code>"score_i"</code>:
  <code>N_Obs.</code> (number of observations),
  <code>Mean</code> (mean),
  <code>Std._Dev.</code> (standard deviation),
  <code>Min</code> (minimum),
  <code>Max</code> (maximum).</p></li>
<li><p><code>"score_i"</code> a numeric vector returning the score for each observation.</p></li>
<li><p><code>"sum_sampling_weights"</code> a numeric value equal to the sum of sampling weights.
  If the argument <code>sampling_weights</code> is unspecified, <code>NA</code> is returned.</p></li>
<li><p><code>"data"</code> a <code>data.frame</code> including the argument <code>data</code> as well as a merged column containing the scores
  (default heading <code>"score_i"</code>, which can be altered by the argument <code>score_i_heading</code>).</p></li>
<li><p><code>"items"</code> a named <code>list</code> of one or more character vectors returning the argument items grouped as dimensions.
  If no dimensions were specified a <code>list</code> with only one vector is returned.
  The list can be re-used as a template for the argument <code>"items"</code> in the functions <code>mdepriv</code> and <code>corr_mat</code>
  without needing to prior <code><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></code>.</p></li>
<li><p><code>"sampling_weights"</code> single character strings returning the specification of the argument <code>sampling_weights</code>, if unspecified <code>NA</code>.</p></li>
<li><p><code>"wa", "wb"</code> two single character strings giving the weighting scheme for the 1st, respectively the 2nd weighting factor.
  If the argument <code>user_def_weights</code> is specified, <code>NA</code>'s are returned.</p></li>
<li><p><code>"rhoH"</code> a numeric value giving the effective rhoH. For weighting schemes not relying on <code>rhoH</code>, NA is returned.</p></li>
<li><p><code>"user_def_weights"</code> a named <code>list</code> of one or more numeric vectors returning the argument <code>user_def_weights</code> grouped as dimensions.
  The names of the <code>list</code>'s elements are identical with those of the output <code>"items"</code>.
  If the argument <code>user_def_weights</code> is unspecified, NA is returned.</p></li>
<li><p><code>"score_i_heading"</code> single character strings returning the specification of the argumnent <code>score_i_heading</code>.</p></li>
</ul></div>
    <div id="details">
    <h2>Details</h2>
    <p><code>mdepriv</code> is an adaptation for R of a homonymous community-contributed Stata command developed by
<a href="http://medim.ceps.lu/stata/mdepriv_v3.pdf" class="external-link">Pi Alperin &amp; Van Kerm (2009)</a>
for computing synthetic scores of multiple deprivation from unidimensional indicators and/or basic items of deprivation.
The underlying literature and algebra are not recapitulated here.
They are documented in <a href="http://medim.ceps.lu/stata/mdepriv_v3.pdf" class="external-link">Pi Alperin &amp; Van Kerm (2009)</a>.
There are minor differences vis-a-vis the predecessor in Stata, pointed out in the
<a href="../doc/what_is_different_from_stata.html"><code><a href="../articles/what_is_different_from_stata.html">vignette("what_is_different_from_stata")</a></code></a>.</p>
<p>The scores are weighted sums of the individual indicators / items.
Both the items and the scores are limited to the [0, 1] range, and the item weights automatically sum to 1.
As customary in deprivation research, all indicators / items require negative orientation
(i.e., higher values are less desirable).
In preparation, any item with values on [0, max], where max &gt; 1, has to be transformed, using a suitable transformation.
The choice of transformation function is dictated by substantive concerns.
With \(i\) indexing the \(i-th\) observation and \(j\) indexing the \(j-th\) item,
and all \(xij\) &gt;= 0, plausible functions are:</p><ul><li><p>\(yij = xij / (theoretical maximum of xj)\), particularly if all \(xj\) to be transformed have natural scales.</p></li>
<li><p>\(yij = xij / (c * mean(xj))\) in the absence of natural scales or theoretical maxima, with \(c &gt;\) 1 a constant identical for all \(xj\) and chosen large enough so that all \(max(yj) &lt;=\) 1.</p></li>
<li><p>the asymptotic \(yij = (xij / mean(xj)) / (1 + (xij / mean(xj)))\), which implies \(mean(yj) =\) 0.5  and \(max(yj)\) &lt; 1 for all \(yj\)</p></li>
</ul><p>and many others.</p>
<p>The multiplicative re-scaling (first two examples) preserves the coefficient of variation,
an important aspect of item discrimination; in the third example,
\(yj\) = 0.5 at the point where \(xj = mean(xj)\) for all \(xj\).
This ensures the same neutral location for all items thus transformed.
Dichotomous items must be coded 0/1, where 1 represents the undesirable state.</p>
<p>The transformation of ordinal indicators requires special care. Multiplicative re-scaling,
which turns ordinal variables into pseudo-interval level ones in the [0, 1] range, is acceptable
if it is unlikely to create significant distortions. Else, a data-driven transformation,
such as the ridit, may be appropriate.</p>
<p>The available weighting schemes with the argument <code>method</code>, respectively <code>wa</code> are:</p><ul><li><p><code>"cz"</code> for Cerioli &amp; Zani (1990) weighting.</p></li>
<li><p><code>"ds"</code> for Desai &amp; Shah (1988) weighting.</p></li>
<li><p><code>"bv"</code> for Betti &amp; Verma (1998) weighting.</p></li>
<li><p><code>"equal"</code> for equi-proportionate weighting of items.</p></li>
</ul><p>The differences among the four methods are visualized in this graph,
as far as the weighting of dichotomous items is concerned.
From \(equal\) to \(Betti-Verma\),
the weighting schemes are increasingly sensitive to items with low prevalence in the sample.
Thus, in all schemes except "equal",
assets that most households own, and which only the most destitute lack (e.g., minimal cooking equipment),
are given higher weights than items that most lack,
and which only the better-off may own (e.g., a motorcycle) (Items are negatively coded,
e.g., 1 = "household lacks the asset").</p>
<p><img src="figures/weightsbyweightingscheme.png" alt=""></p>
<p>For continuous items (e.g., a food insecurity score),
higher values denote less desirable states.
Item weights are proportionate to (1 - \(mean(yj)\)) for the Desai-Shah scheme,
to \(log\)(1 / \(mean(yj)\)) for Cerioli-Zani, and to the coefficients of variation [i.e., \(std.dev(xj)\) / \(mean(xj)\)] for Betti-Verma.</p>
<p>Differently from the other three methods, Betti-Verma also controls for redundancy among items by lowering the weights of items that are highly correlated with many items.</p>
<p>Formulas and literature references are provided in <a href="http://medim.ceps.lu/stata/mdepriv_v3.pdf" class="external-link">Pi Alperin &amp; Van Kerm (2009)</a>.
<code>"cz"</code> and <code>"ds"</code> are built on the function <code><a href="https://rdrr.io/pkg/Weighted.Desc.Stat/man/w.mean.html" class="external-link">w.mean</a></code>.
Whereas <code>"bv"</code> relies for its 1st factor (<code>wa</code>) on <code><a href="https://rdrr.io/pkg/Weighted.Desc.Stat/man/w.cv.html" class="external-link">w.cv</a></code>.
<code>"bv"</code>'s 2nd factor (<code>wb</code>) as well as any specification of <code>wb</code> but <code>"diagonal"</code> rely on <code><a href="https://american-institutes-for-research.github.io/wCorr/reference/weightedCorr.html" class="external-link">weightedCorr</a></code>.</p>
<p>When setting the argument <code>bv_corr_type</code>, respectively <code>wb</code> to <code>"mixed"</code>,
the appropriate correlation type <code>"pearson"</code>, <code>"polyserial"</code> or <code>"polychoric"</code>
is automatically detected for each pair of items by the following rules:</p><ul><li><p><code>"pearson"</code>: both items have &gt; 10 distinct values.</p></li>
<li><p><code>"polyserial"</code>: one item has \(\le\) 10, the other &gt; 10 distinct values.</p></li>
<li><p><code>"polychoric"</code>: both items have \(\le\) 10 distinct values.</p></li>
</ul><p>When <code>bv_corr_type</code> respectively <code>wb</code> is set to <code>"pearson"</code>
this correlation type is forced on all item pairs.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Betti, G. &amp; Verma, V. K. (1998), 'Measuring the degree of poverty in a dynamic and comparative context: a multi-dimensional approach using fuzzy set theory', Working Paper 22, Dipartimento di Metodi Quantitativi, Universit`a di Siena.</p>
<p>Cerioli, A. &amp; Zani, S. (1990), 'A fuzzy approach to the measurement of poverty', in C. Dagum &amp; M. Zenga (eds.), Income and Wealth Distribution, Inequality and Poverty, Springer Verlag, Berlin, 272-284.</p>
<p>Desai, M. &amp; Shah, A. (1988), 'An econometric approach to the measurement of poverty', Oxford Economic Papers, 40(3):505-522.</p>
<p>Pi Alperin, M. N. &amp; Van Kerm, P. (2009), 'mdepriv - Synthetic indicators of multiple deprivation', v2.0 (revised March 2014), CEPS/INSTEAD, Esch/Alzette, Luxembourg. <a href="http://medim.ceps.lu/stata/mdepriv_v3.pdf" class="external-link">http://medim.ceps.lu/stata/mdepriv_v3.pdf</a> (2019-MM-DD).</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><a href="../doc/mdepriv_get_started.html"><code><a href="../articles/mdepriv_get_started.html">vignette("mdepriv_get_started")</a></code></a></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">simul_data</span>, <span class="fl">3</span><span class="op">)</span> <span class="co"># data used for demonstration</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id y1 y2 y3  y4    y5    y6    y7 sampl_weights</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1  0  0  0 0.0 0.369 0.174 0.196         0.556</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  2  1  0  1 0.2 0.762 0.832 1.000         1.500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  3  0  1  1 0.4 0.708 0.775 0.833         0.973</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># minimum possible specification: data &amp; items:</span></span></span>
<span class="r-in"><span><span class="fu">mdepriv</span><span class="op">(</span><span class="va">simul_data</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y2"</span>, <span class="st">"y3"</span>, <span class="st">"y4"</span>, <span class="st">"y5"</span>, <span class="st">"y6"</span>, <span class="st">"y7"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $weighting_scheme</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Cerioli &amp; Zani (1990) weighting scheme"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $aggregate_deprivation_level</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.3719576</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $summary_by_item</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    Item   Index     Weight     Contri     Share</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    y1 0.16000 0.31261773 0.05001884 0.1344746</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    y2 0.70000 0.06084472 0.04259131 0.1145058</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    y3 0.53000 0.10830307 0.05740063 0.1543204</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    y4 0.27600 0.21960815 0.06061185 0.1629537</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5    y5 0.69579 0.06187379 0.04305116 0.1157421</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6    y6 0.50004 0.11822945 0.05911945 0.1589414</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7    y7 0.49918 0.11852309 0.05916435 0.1590621</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8 Total      NA 1.00000000 0.37195759 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $summary_scores</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   N_Obs.      Mean Std._Dev.       Min       Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    100 0.3719576 0.2120671 0.0654181 0.9521171</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="co"># group items in dimensions:</span></span></span>
<span class="r-in"><span><span class="fu">mdepriv</span><span class="op">(</span><span class="va">simul_data</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y2"</span>, <span class="st">"y3"</span>, <span class="st">"y4"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y5"</span>, <span class="st">"y6"</span>, <span class="st">"y7"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $weighting_scheme</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Cerioli &amp; Zani (1990) weighting scheme"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $aggregate_deprivation_level</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.4202786</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $summary_by_dimension</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Dimension N_Item     Index Weight    Contri     Share</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Dimension 1      4 0.3003002    0.5 0.1501501 0.3572632</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Dimension 2      3 0.5402570    0.5 0.2701285 0.6427368</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       Total      7        NA    1.0 0.4202786 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $summary_by_item</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Dimension Item   Index     Weight     Contri      Share</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Dimension 1   y1 0.16000 0.22286104 0.03565777 0.08484317</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Dimension 1   y2 0.70000 0.04337540 0.03036278 0.07224441</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Dimension 1   y3 0.53000 0.07720783 0.04092015 0.09736434</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Dimension 1   y4 0.27600 0.15655574 0.04320938 0.10281129</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Dimension 2   y5 0.69579 0.10359735 0.07208200 0.17151004</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 Dimension 2   y6 0.50004 0.19795550 0.09898567 0.23552393</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 Dimension 2   y7 0.49918 0.19844715 0.09906085 0.23570282</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8       Total &lt;NA&gt;      NA 1.00000000 0.42027859 1.00000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $summary_scores</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   N_Obs.      Mean Std._Dev.       Min      Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    100 0.4202786 0.1815342 0.1095317 0.919828</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="co"># customized labelling of dimensions:</span></span></span>
<span class="r-in"><span><span class="fu">mdepriv</span><span class="op">(</span><span class="va">simul_data</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"Group A"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y2"</span>, <span class="st">"y3"</span>, <span class="st">"y4"</span><span class="op">)</span>, <span class="st">"Group B"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y5"</span>, <span class="st">"y6"</span>, <span class="st">"y7"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $weighting_scheme</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Cerioli &amp; Zani (1990) weighting scheme"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $aggregate_deprivation_level</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.4202786</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $summary_by_dimension</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Dimension N_Item     Index Weight    Contri     Share</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   Group A      4 0.3003002    0.5 0.1501501 0.3572632</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   Group B      3 0.5402570    0.5 0.2701285 0.6427368</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     Total      7        NA    1.0 0.4202786 1.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $summary_by_item</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Dimension Item   Index     Weight     Contri      Share</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   Group A   y1 0.16000 0.22286104 0.03565777 0.08484317</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   Group A   y2 0.70000 0.04337540 0.03036278 0.07224441</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   Group A   y3 0.53000 0.07720783 0.04092015 0.09736434</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   Group A   y4 0.27600 0.15655574 0.04320938 0.10281129</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   Group B   y5 0.69579 0.10359735 0.07208200 0.17151004</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   Group B   y6 0.50004 0.19795550 0.09898567 0.23552393</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   Group B   y7 0.49918 0.19844715 0.09906085 0.23570282</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8     Total &lt;NA&gt;      NA 1.00000000 0.42027859 1.00000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $summary_scores</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   N_Obs.      Mean Std._Dev.       Min      Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    100 0.4202786 0.1815342 0.1095317 0.919828</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># available outputs</span></span></span>
<span class="r-in"><span><span class="va">no_dim_specified</span> <span class="op">&lt;-</span> <span class="fu">mdepriv</span><span class="op">(</span><span class="va">simul_data</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y2"</span>, <span class="st">"y3"</span>, <span class="st">"y4"</span>, <span class="st">"y5"</span>, <span class="st">"y6"</span>, <span class="st">"y7"</span><span class="op">)</span>, output <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">two_dim</span> <span class="op">&lt;-</span> <span class="fu">mdepriv</span><span class="op">(</span><span class="va">simul_data</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y2"</span>, <span class="st">"y3"</span>, <span class="st">"y4"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y5"</span>, <span class="st">"y6"</span>, <span class="st">"y7"</span><span class="op">)</span><span class="op">)</span>, output <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">no_dim_specified</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 14</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">two_dim</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 15</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  row.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">two_dim</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  no_or_1_dim_specified <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">two_dim</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">no_dim_specified</span><span class="op">)</span>, <span class="st">"X"</span>, <span class="st">""</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  at_least_2_dim_specified <span class="op">=</span> <span class="st">"X"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                             no_or_1_dim_specified at_least_2_dim_specified</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> weighting_scheme                                X                        X</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> aggregate_deprivation_level                     X                        X</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> summary_by_dimension                                                     X</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> summary_by_item                                 X                        X</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> summary_scores                                  X                        X</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> score_i                                         X                        X</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sum_sampling_weights                            X                        X</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> data                                            X                        X</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> items                                           X                        X</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> sampling_weights                                X                        X</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> wa                                              X                        X</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> wb                                              X                        X</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> rhoH                                            X                        X</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> user_def_weights                                X                        X</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> score_i_heading                                 X                        X</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/sets.html" class="external-link">setdiff</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">two_dim</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">no_dim_specified</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "summary_by_dimension"</span>
<span class="r-in"><span><span class="co"># if no dimensions are specified, "summary_by_dimension" is dropped from the two output wrappers</span></span></span>
<span class="r-in"><span><span class="co"># (output = "view" (default), output = "all")</span></span></span>
<span class="r-in"><span><span class="co"># however, even if no dimension is specified "summary_by_dimension" is accessible</span></span></span>
<span class="r-in"><span><span class="fu">mdepriv</span><span class="op">(</span><span class="va">simul_data</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y2"</span>, <span class="st">"y3"</span>, <span class="st">"y4"</span>, <span class="st">"y5"</span>, <span class="st">"y6"</span>, <span class="st">"y7"</span><span class="op">)</span>, output <span class="op">=</span> <span class="st">"summary_by_dimension"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Dimension N_Item     Index Weight    Contri Share</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Dimension 1      7 0.3719576      1 0.3719576     1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       Total      7        NA      1 0.3719576     1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># apply sampling weights (3rd argument)</span></span></span>
<span class="r-in"><span><span class="va">with_s_w</span> <span class="op">&lt;-</span> <span class="fu">mdepriv</span><span class="op">(</span><span class="va">simul_data</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y4"</span>, <span class="st">"y5"</span>, <span class="st">"y6"</span><span class="op">)</span>, <span class="st">"sampl_weights"</span>, output <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">without_s_w</span> <span class="op">&lt;-</span> <span class="fu">mdepriv</span><span class="op">(</span><span class="va">simul_data</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y4"</span>, <span class="st">"y5"</span>, <span class="st">"y6"</span><span class="op">)</span>, output <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># return sum and specification of sampling weights if applied ...</span></span></span>
<span class="r-in"><span><span class="va">with_s_w</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sum_sampling_weights"</span>, <span class="st">"sampling_weights"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $sum_sampling_weights</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 100.237</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $sampling_weights</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "sampl_weights"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="co"># if not, NA's are returned:</span></span></span>
<span class="r-in"><span><span class="va">without_s_w</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sum_sampling_weights"</span>, <span class="st">"sampling_weights"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $sum_sampling_weights</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $sampling_weights</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># weighting schemes</span></span></span>
<span class="r-in"><span><span class="co"># the default weighting scheme is "Cerioli &amp; Zani": method = "cz"</span></span></span>
<span class="r-in"><span><span class="fu">mdepriv</span><span class="op">(</span><span class="va">simul_data</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y2"</span>, <span class="st">"y3"</span><span class="op">)</span>, output <span class="op">=</span> <span class="st">"weighting_scheme"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Cerioli &amp; Zani (1990) weighting scheme"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">methods</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cz"</span>, <span class="st">"ds"</span>, <span class="st">"bv"</span>, <span class="st">"equal"</span><span class="op">)</span> <span class="co"># 4 standard weighting schemes available</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">methods</span>,</span></span>
<span class="r-in"><span>      <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">mdepriv</span><span class="op">(</span><span class="va">simul_data</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y2"</span>, <span class="st">"y3"</span><span class="op">)</span>, method <span class="op">=</span> <span class="va">x</span>, output <span class="op">=</span> <span class="st">"weighting_scheme"</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                       cz </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> "Cerioli &amp; Zani (1990) weighting scheme" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                       ds </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   "Desai &amp; Shah (1988) weighting scheme" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                       bv </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  "Betti &amp; Verma (1998) weighting scheme" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                    equal </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    "Equi-proportionate weighting scheme" </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># alternative, more flexible ways to select (double) weighting schemes</span></span></span>
<span class="r-in"><span><span class="fu">mdepriv</span><span class="op">(</span><span class="va">simul_data</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y2"</span>, <span class="st">"y3"</span><span class="op">)</span>, wa <span class="op">=</span> <span class="st">"cz"</span>, wb <span class="op">=</span> <span class="st">"mixed"</span>, output <span class="op">=</span> <span class="st">"weighting_scheme"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "User-defined weighting scheme: wa = “cz”, wb = “mixed”."</span>
<span class="r-in"><span><span class="co"># some of the double weighting specification are almost lookalikes of the standard weight methods</span></span></span>
<span class="r-in"><span><span class="va">method_bv_pearson</span> <span class="op">&lt;-</span> <span class="fu">mdepriv</span><span class="op">(</span><span class="va">simul_data</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y2"</span>, <span class="st">"y3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                             method <span class="op">=</span> <span class="st">"bv"</span>, bv_corr_type <span class="op">=</span> <span class="st">"pearson"</span>, output <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">method_bv_pearson</span><span class="op">$</span><span class="va">weighting_scheme</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Betti &amp; Verma (1998) weighting scheme"</span>
<span class="r-in"><span><span class="va">wa_wb_bv_pearson</span> <span class="op">&lt;-</span> <span class="fu">mdepriv</span><span class="op">(</span><span class="va">simul_data</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y2"</span>, <span class="st">"y3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                            wa <span class="op">=</span> <span class="st">"bv"</span>, wb <span class="op">=</span> <span class="st">"pearson"</span>, output <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">wa_wb_bv_pearson</span><span class="op">$</span><span class="va">weighting_scheme</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "User-defined weighting scheme: wa = “bv”, wb = “pearson”."</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">method_bv_pearson</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span>, <span class="va">wa_wb_bv_pearson</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># either a fixed or a data driven rhoH is involved in any true double weighting scheme</span></span></span>
<span class="r-in"><span><span class="co"># (effective single weighting schemes: method: "cs", "ds", "equal" or wb = "diagonal")</span></span></span>
<span class="r-in"><span><span class="va">items_sel</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y2"</span>, <span class="st">"y3"</span>, <span class="st">"y4"</span>, <span class="st">"y5"</span>, <span class="st">"y6"</span>, <span class="st">"y7"</span><span class="op">)</span> <span class="co"># a selection of items</span></span></span>
<span class="r-in"><span><span class="co"># data driven:</span></span></span>
<span class="r-in"><span><span class="fu">mdepriv</span><span class="op">(</span><span class="va">simul_data</span>, <span class="va">items_sel</span>, method <span class="op">=</span> <span class="st">"bv"</span>, output <span class="op">=</span> <span class="st">"rhoH"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.6563016</span>
<span class="r-in"><span><span class="fu">mdepriv</span><span class="op">(</span><span class="va">simul_data</span>, <span class="va">items_sel</span>, wa <span class="op">=</span> <span class="st">"cz"</span>, wb <span class="op">=</span> <span class="st">"pearson"</span>, output <span class="op">=</span> <span class="st">"rhoH"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.3445555</span>
<span class="r-in"><span><span class="co"># fixed:</span></span></span>
<span class="r-in"><span><span class="fu">mdepriv</span><span class="op">(</span><span class="va">simul_data</span>, <span class="va">items_sel</span>, method <span class="op">=</span> <span class="st">"bv"</span>, rhoH <span class="op">=</span> <span class="fl">0.3</span>, output <span class="op">=</span> <span class="st">"rhoH"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.3</span>
<span class="r-in"><span><span class="fu">mdepriv</span><span class="op">(</span><span class="va">simul_data</span>, <span class="va">items_sel</span>, wa <span class="op">=</span> <span class="st">"cz"</span>, wb <span class="op">=</span> <span class="st">"pearson"</span>, rhoH <span class="op">=</span> <span class="fl">0.3</span>, output <span class="op">=</span> <span class="st">"rhoH"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.3</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># check how weighting settings are applied:</span></span></span>
<span class="r-in"><span><span class="va">bv</span> <span class="op">&lt;-</span> <span class="fu">mdepriv</span><span class="op">(</span><span class="va">simul_data</span>, <span class="va">items_sel</span>, method <span class="op">=</span> <span class="st">"bv"</span>, output <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">bv</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"weighting_scheme"</span>, <span class="st">"wa"</span>, <span class="st">"wb"</span>, <span class="st">"rhoH"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $weighting_scheme</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Betti &amp; Verma (1998) weighting scheme"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $wa</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "bv"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $wb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "mixed"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $rhoH</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.6563016</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="va">ds</span> <span class="op">&lt;-</span> <span class="fu">mdepriv</span><span class="op">(</span><span class="va">simul_data</span>, <span class="va">items_sel</span>, method <span class="op">=</span> <span class="st">"ds"</span>, output <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ds</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"weighting_scheme"</span>, <span class="st">"wa"</span>, <span class="st">"wb"</span>, <span class="st">"rhoH"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $weighting_scheme</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Desai &amp; Shah (1988) weighting scheme"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $wa</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "ds"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $wb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "diagonal"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $rhoH</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="va">equal_pearson</span> <span class="op">&lt;-</span> <span class="fu">mdepriv</span><span class="op">(</span><span class="va">simul_data</span>, <span class="va">items_sel</span>,</span></span>
<span class="r-in"><span>                         wa <span class="op">=</span> <span class="st">"equal"</span>, wb <span class="op">=</span> <span class="st">"pearson"</span>, output <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">equal_pearson</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"weighting_scheme"</span>, <span class="st">"wa"</span>, <span class="st">"wb"</span>, <span class="st">"rhoH"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $weighting_scheme</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "User-defined weighting scheme: wa = “equal”, wb = “pearson”."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $wa</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "equal"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $wb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "pearson"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $rhoH</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.3445555</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="va">equal_pearson_rhoH_fixed</span> <span class="op">&lt;-</span> <span class="fu">mdepriv</span><span class="op">(</span><span class="va">simul_data</span>, <span class="va">items_sel</span>,</span></span>
<span class="r-in"><span>                                    wa <span class="op">=</span> <span class="st">"equal"</span>, wb <span class="op">=</span> <span class="st">"pearson"</span>, rhoH <span class="op">=</span> <span class="fl">0.3</span>, output <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">equal_pearson_rhoH_fixed</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"weighting_scheme"</span>, <span class="st">"wa"</span>, <span class="st">"wb"</span>, <span class="st">"rhoH"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $weighting_scheme</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "User-defined weighting scheme: wa = “equal”, wb = “pearson”."</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $wa</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "equal"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $wb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "pearson"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $rhoH</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># pass expertise-based weights to the items</span></span></span>
<span class="r-in"><span><span class="va">dim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"Group A"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y2"</span>, <span class="st">"y3"</span><span class="op">)</span>, <span class="st">"Group B"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y4"</span>, <span class="st">"y5"</span>, <span class="st">"y6"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># 'expertise weights' structured as dimensions</span></span></span>
<span class="r-in"><span><span class="va">w_expertise</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">0.25</span>, <span class="fl">0.25</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.4</span>, <span class="fl">0.45</span>, <span class="fl">0.15</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">model_expertise</span> <span class="op">&lt;-</span> <span class="fu">mdepriv</span><span class="op">(</span><span class="va">simul_data</span>, items <span class="op">=</span> <span class="va">dim</span>,</span></span>
<span class="r-in"><span>                           user_def_weights <span class="op">=</span> <span class="va">w_expertise</span>, output <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># check weighting settings ...</span></span></span>
<span class="r-in"><span><span class="va">model_expertise</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"weighting_scheme"</span>, <span class="st">"wa"</span>, <span class="st">"wb"</span>, <span class="st">"rhoH"</span>, <span class="st">"user_def_weights"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $weighting_scheme</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Item-wise user-defined weighting scheme"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $wa</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $wb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $rhoH</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $user_def_weights</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $user_def_weights$`Group A`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.50 0.25 0.25</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $user_def_weights$`Group B`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 0.40 0.45 0.15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="co"># ... wa, wb and rhoH are not involved, when expertise weights are applied,</span></span></span>
<span class="r-in"><span><span class="co"># and therefore returned as NA's.</span></span></span>
<span class="r-in"><span><span class="co"># user-defined names of dimensions are inherited from the argument items.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># use outputs elements</span></span></span>
<span class="r-in"><span><span class="va">dim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y2"</span>, <span class="st">"y3"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y4"</span>, <span class="st">"y5"</span>, <span class="st">"y6"</span>, <span class="st">"y7"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">model_1</span> <span class="op">&lt;-</span> <span class="fu">mdepriv</span><span class="op">(</span><span class="va">simul_data</span>, items <span class="op">=</span> <span class="va">dim</span>, method <span class="op">=</span> <span class="st">"bv"</span>, output <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">model_1</span><span class="op">$</span><span class="va">summary_by_item</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     Dimension Item   Index     Weight     Contri      Share</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Dimension 1   y1 0.16000 0.26712437 0.04273990 0.10578109</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Dimension 1   y2 0.70000 0.08075457 0.05652820 0.13990708</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Dimension 1   y3 0.53000 0.15212106 0.08062416 0.19954450</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Dimension 2   y4 0.27600 0.15553907 0.04292878 0.10624858</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Dimension 2   y5 0.69579 0.04661465 0.03243401 0.08027406</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 Dimension 2   y6 0.50004 0.12448765 0.06224880 0.15406555</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 Dimension 2   y7 0.49918 0.17335863 0.08653716 0.21417915</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8       Total &lt;NA&gt;      NA 1.00000000 0.40404102 1.00000000</span>
<span class="r-in"><span><span class="va">by_item_no_total</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">model_1</span><span class="op">$</span><span class="va">summary_by_item</span>, <span class="va">Weight</span> <span class="op">!=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/barplot.html" class="external-link">barplot</a></span><span class="op">(</span><span class="va">Weight</span> <span class="op">~</span> <span class="va">Item</span>, data <span class="op">=</span> <span class="va">by_item_no_total</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="mdepriv-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">model_1</span><span class="op">$</span><span class="va">summary_scores</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   N_Obs.     Mean Std._Dev.       Min       Max</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    100 0.404041 0.2030587 0.0606887 0.9495825</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">model_1</span><span class="op">$</span><span class="va">score_i</span>,</span></span>
<span class="r-in"><span>  main <span class="op">=</span> <span class="st">'model: method = "bv", bv_corr_type = "mixed" (default)'</span>,</span></span>
<span class="r-in"><span>  xlab <span class="op">=</span> <span class="st">"scores"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="mdepriv-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># output data ...</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">model_1</span><span class="op">$</span><span class="va">data</span>, <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id y1 y2 y3  y4    y5    y6    y7 sampl_weights    score_i</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1  0  0  0 0.0 0.369 0.174 0.196         0.556 0.07283995</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  2  1  0  1 0.2 0.762 0.832 1.000         1.500 0.76280596</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  3  0  1  1 0.4 0.708 0.775 0.833         0.973 0.56898009</span>
<span class="r-in"><span><span class="co"># ... compare to input data ...</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">simul_data</span>, <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id y1 y2 y3  y4    y5    y6    y7 sampl_weights</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1  0  0  0 0.0 0.369 0.174 0.196         0.556</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  2  1  0  1 0.2 0.762 0.832 1.000         1.500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  3  0  1  1 0.4 0.708 0.775 0.833         0.973</span>
<span class="r-in"><span><span class="co"># ... only the scores have been merged to the (input) data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">model_1</span><span class="op">$</span><span class="va">data</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">model_1</span><span class="op">$</span><span class="va">data</span><span class="op">)</span> <span class="op">!=</span> <span class="st">"score_i"</span><span class="op">]</span>, <span class="va">simul_data</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="co"># scores are twofold accessible</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">model_1</span><span class="op">$</span><span class="va">score_i</span>, <span class="va">model_1</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">score_i</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># re-use output of a model as arguments in another model:</span></span></span>
<span class="r-in"><span><span class="va">dim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y1"</span>, <span class="st">"y2"</span>, <span class="st">"y3"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"y4"</span>, <span class="st">"y5"</span>, <span class="st">"y6"</span>, <span class="st">"y7"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">model_1</span> <span class="op">&lt;-</span> <span class="fu">mdepriv</span><span class="op">(</span><span class="va">simul_data</span>, items <span class="op">=</span> <span class="va">dim</span>, method <span class="op">=</span> <span class="st">"bv"</span>, output <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">model_2</span> <span class="op">&lt;-</span> <span class="fu">mdepriv</span><span class="op">(</span><span class="va">simul_data</span>, items <span class="op">=</span> <span class="va">model_1</span><span class="op">$</span><span class="va">items</span>, method <span class="op">=</span> <span class="st">"ds"</span>, output <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">model_1</span><span class="op">$</span><span class="va">items</span>, <span class="va">model_2</span><span class="op">$</span><span class="va">items</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="co"># how do the scores of the 2 models differ?</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">model_1</span><span class="op">$</span><span class="va">score_i</span>, <span class="va">model_2</span><span class="op">$</span><span class="va">score_i</span>,</span></span>
<span class="r-in"><span>  xlab <span class="op">=</span> <span class="va">model_1</span><span class="op">$</span><span class="va">weighting_scheme</span>, ylab <span class="op">=</span> <span class="va">model_2</span><span class="op">$</span><span class="va">weighting_scheme</span>,</span></span>
<span class="r-in"><span>  xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  asp <span class="op">=</span> <span class="fl">1</span>, main <span class="op">=</span> <span class="st">"same item grouping"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html" class="external-link">abline</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, col <span class="op">=</span> <span class="st">"red"</span>, lty <span class="op">=</span> <span class="fl">2</span>, lwd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="mdepriv-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># accumulating scores from different models in the output data</span></span></span>
<span class="r-in"><span><span class="co"># this code will throw an error message with a hint on how to handle the re-use ...</span></span></span>
<span class="r-in"><span><span class="co"># ... of 'data' output as agrument. so run it and read!</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span></span></span>
<span class="r-in"><span><span class="va">model_3</span> <span class="op">&lt;-</span> <span class="fu">mdepriv</span><span class="op">(</span><span class="va">model_1</span><span class="op">$</span><span class="va">data</span>, items <span class="op">=</span> <span class="va">model_1</span><span class="op">$</span><span class="va">items</span>,</span></span>
<span class="r-in"><span>                   wa <span class="op">=</span> <span class="st">"cz"</span>, wb <span class="op">=</span> <span class="st">"mixed"</span>, output <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Error : “score_i” is not valid as argument ‘score_i_heading’ for the current model. For the argument ‘data’ already includes a column by this name, possibly as the result of a previous mdepriv model. Therefore, give a different name for the scores column in the output data by specifying the argument ‘score_i_heading’.</span>
<span class="r-in"><span><span class="va">model_3</span> <span class="op">&lt;-</span> <span class="fu">mdepriv</span><span class="op">(</span><span class="va">model_1</span><span class="op">$</span><span class="va">data</span>, items <span class="op">=</span> <span class="va">model_1</span><span class="op">$</span><span class="va">items</span>,</span></span>
<span class="r-in"><span>                   wa <span class="op">=</span> <span class="st">"cz"</span>, wb <span class="op">=</span> <span class="st">"mixed"</span>, output <span class="op">=</span> <span class="st">"all"</span>,</span></span>
<span class="r-in"><span>                   score_i_heading <span class="op">=</span> <span class="st">"score_i_model_3"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">model_3</span><span class="op">$</span><span class="va">data</span>, <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id y1 y2 y3  y4    y5    y6    y7 sampl_weights    score_i score_i_model_3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1  0  0  0 0.0 0.369 0.174 0.196         0.556 0.07283995      0.07444566</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  2  1  0  1 0.2 0.762 0.832 1.000         1.500 0.76280596      0.78444558</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  3  0  1  1 0.4 0.708 0.775 0.833         0.973 0.56898009      0.54205364</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># if gathering scores from iteratered runs is the purpose it's expedient to avoid confusion ...</span></span></span>
<span class="r-in"><span><span class="co"># ... by naming already the 1st scores column with reference to its model</span></span></span>
<span class="r-in"><span><span class="va">model_1</span> <span class="op">&lt;-</span> <span class="fu">mdepriv</span><span class="op">(</span><span class="va">simul_data</span>, <span class="va">dim</span>, method <span class="op">=</span> <span class="st">"bv"</span>,</span></span>
<span class="r-in"><span>                   score_i_heading <span class="op">=</span> <span class="st">"score_i_1"</span>, output <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">model_2</span> <span class="op">&lt;-</span> <span class="fu">mdepriv</span><span class="op">(</span><span class="va">model_1</span><span class="op">$</span><span class="va">data</span>, <span class="va">model_1</span><span class="op">$</span><span class="va">items</span>, method <span class="op">=</span> <span class="st">"ds"</span>,</span></span>
<span class="r-in"><span>                   score_i_heading <span class="op">=</span> <span class="st">"score_i_2"</span>, output <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">model_3</span> <span class="op">&lt;-</span> <span class="fu">mdepriv</span><span class="op">(</span><span class="va">model_2</span><span class="op">$</span><span class="va">data</span>, <span class="va">model_1</span><span class="op">$</span><span class="va">items</span>, wa <span class="op">=</span> <span class="st">"cz"</span>, wb <span class="op">=</span> <span class="st">"mixed"</span>,</span></span>
<span class="r-in"><span>                   score_i_heading <span class="op">=</span> <span class="st">"score_i_3"</span>, output <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">model_3</span><span class="op">$</span><span class="va">data</span>, <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id y1 y2 y3  y4    y5    y6    y7 sampl_weights  score_i_1  score_i_2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1  0  0  0 0.0 0.369 0.174 0.196         0.556 0.07283995 0.07328948</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  2  1  0  1 0.2 0.762 0.832 1.000         1.500 0.76280596 0.72556101</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  3  0  1  1 0.4 0.708 0.775 0.833         0.973 0.56898009 0.56186065</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    score_i_3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.07444566</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.78444558</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.54205364</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Attilio Benini, Aldo Benini.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

